{"version":3,"file":"appoint.js","sources":["../src/type.ts","../src/schedule.ts","../src/utils.ts","../src/queue.ts","../src/co.ts","../src/appoint.ts"],"sourcesContent":["export enum AppointState {\n    PENDING,\n    FULFILLED,\n    REJECTED,\n}\n","\ndeclare const process: any;\ndeclare const global: any;\ndeclare const Promise: any;\ndeclare const window: any;\n// copy to https://github.com/petkaantonov/bluebird/blob/master/src/schedule.js\nlet schedule;\nconst noAsyncScheduler = function noAsyncScheduler() {\n    throw new Error(\"NO_ASYNC_SCHEDULER\");\n};\nconst isNode = typeof process !== \"undefined\" &&\n        Object.prototype.toString.call(process).toLowerCase() === \"[object process]\";\nconst util = {\n    isNode,\n    isRecentNode: isNode && (function isRecentNode() {\n        const version = process.versions.node.split(\".\").map(Number);\n        return (version[0] === 0 && version[1] > 10) || (version[0] > 0);\n    })(),\n    getNativePromise() {\n        if (typeof Promise === \"function\") {\n            try {\n                const promise = new Promise(function _(){ return void 0; });\n                if ({}.toString.call(promise) === \"[object Promise]\") {\n                    return Promise;\n                }\n            } catch (e) {\n                return void 0;\n            }\n        }\n    },\n};\nconst NativePromise = util.getNativePromise();\n// 如果是node环境且MutationObserver不存在使用setImmediate或process.nextTick\nif (util.isNode && typeof MutationObserver === \"undefined\") {\n    const GlobalSetImmediate = global.setImmediate;\n    const ProcessNextTick = process.nextTick;\n    schedule = util.isRecentNode\n                ? function _() {\n                    GlobalSetImmediate(makeFunction(this, arguments));\n                }\n                : function _() {\n                    ProcessNextTick(makeFunction(this, arguments));\n                };\n// 如果能够获取原生Promise使用Promise\n} else if (typeof NativePromise === \"function\" &&\n           typeof NativePromise.resolve === \"function\") {\n    const nativePromise = NativePromise.resolve();\n    schedule = function _() {\n        nativePromise.then(makeFunction(this, arguments));\n    };\n// 使用MutationObserver\n} else if ((typeof MutationObserver !== \"undefined\") &&\n          !(typeof window !== \"undefined\" &&\n            window.navigator &&\n            (window.navigator.standalone || window.cordova))) {\n    schedule = (function _() {\n        const div = document.createElement(\"div\");\n        const opts = { attributes: true };\n        let toggleScheduled = false;\n        const div2 = document.createElement(\"div\");\n        const o2 = new MutationObserver(function Observer() {\n            div.classList.toggle(\"foo\");\n            toggleScheduled = false;\n        });\n        o2.observe(div2, opts);\n\n        const scheduleToggle = function scheduleToggle() {\n            if (toggleScheduled) {\n                return;\n            }\n            toggleScheduled = true;\n            div2.classList.toggle(\"foo\");\n        };\n\n        return function schedule() {\n            const newFun = makeFunction(this, arguments);\n            const o = new MutationObserver(function _() {\n                o.disconnect();\n                newFun();\n            });\n            o.observe(div, opts);\n            scheduleToggle();\n        };\n    })();\n// 浏览器中的setImmediate为备选\n} else if (typeof setImmediate !== \"undefined\") {\n    schedule = function schedule() {\n        setImmediate(makeFunction(this, arguments));\n    };\n// 最慢的setTimeout\n} else if (typeof setTimeout !== \"undefined\") {\n    schedule = function schedule() {\n        setTimeout(makeFunction(this, arguments), 0);\n    };\n// 不支持异步\n} else {\n    schedule = noAsyncScheduler;\n}\n\nfunction makeFunction(ctx, args) {\n    const len = args.length;\n    if (len === 0 || typeof args[0] !== \"function\") {\n        throw Error(\"not function\");\n    }\n    const fun = args[0];\n    const callback = len > 1 ? args[1] : null;\n    const funArgs: any[] = Array.prototype.slice.call(args, 2);\n    return () => {\n        const res = fun.apply(ctx, funArgs);\n        if (typeof callback === \"function\") {\n            callback(res);\n        }\n    };\n}\n\nexport default schedule;\n","import Appoint from \"./appoint\";\nimport { AppointState } from \"./type\";\n\nimport schedule from \"./schedule\";\n\ndeclare const process: any;\n\nexport function INTERNAL(): void { return void 0; }\nexport function isFunction(func: any): boolean {\n    return typeof func === \"function\";\n}\nexport function isObject(obj: any): boolean {\n    return typeof obj === \"object\";\n}\nexport function isArray(arr: any): boolean {\n    return Object.prototype.toString.call(arr) === \"[object Array]\";\n}\nexport function getThen(obj: any): (args: any) => any {\n    const then = obj && obj.then;\n    if (obj && (isObject(obj) || isFunction(obj)) && isFunction(then)) {\n        const appyThen = isFunction(then.bind) ?\n            then.bind(obj) :\n            (onFulfilled?: (value) => any, onRejected?: (error: Error) => any) => {\n                return then.call(obj, onFulfilled, onRejected);\n            };\n        return appyThen;\n    }\n    return void 0;\n}\n\nexport function unwrap(promise: Appoint, func: (...args) => void, value: any): void {\n    schedule(() => {\n        let returnValue;\n        try {\n            returnValue = func(value);\n        } catch (error) {\n            return doReject(promise, error);\n        }\n        if (returnValue === promise) {\n            doReject(promise, new TypeError(\"Cannot resolve promise with itself\"));\n        } else {\n            doResolve(promise, returnValue);\n        }\n    });\n}\nexport function doResolve(self: Appoint, value: any) {\n    try {\n        const then = getThen(value);\n        if (then) {\n            safelyResolveThen(self, then);\n        } else {\n            self.setState(AppointState.FULFILLED);\n            self.value = value;\n            self.queue.forEach((queueItem) => {\n                queueItem.callFulfilled(value);\n            });\n        }\n        return self;\n    } catch (error) {\n        return doReject(self, error);\n    }\n}\nexport function safelyResolveThen(self: Appoint, then: (...args) => void) {\n    let called: boolean = false;\n    try {\n        then((value: any) => {\n            if (called) {\n                return;\n            }\n            called = true;\n            doResolve(self, value);\n        }, (error: Error) => {\n            if (called) {\n                return;\n            }\n            called = true;\n            doReject(self, error);\n        });\n    } catch (error) {\n        if (called) {\n            return;\n        }\n        called = true;\n        doReject(self, error);\n    }\n}\n\nexport function doReject(self: Appoint, error: Error) {\n    self.setState(AppointState.REJECTED);\n    self.value = error;\n    if (self.handled) {\n        schedule(() => {\n            if (self.handled) {\n                if (typeof process !== \"undefined\") {\n                    process.emit(\"unhandledRejection\", error, self);\n                } else {\n                    console.error(error);\n                }\n            }\n        });\n    }\n    self.queue.forEach((queueItem) => {\n        queueItem.callRejected(error);\n    });\n    return self;\n}\n","import { doReject, doResolve, isFunction, unwrap} from \"./utils\";\n\nimport Appoint from \"./appoint\";\n\nexport class QueueItem {\n    public promise: Appoint;\n    public callFulfilled: (...args: any[]) => void;\n    public callRejected: (...args: any[]) => void;\n    constructor(promise: Appoint, onFulfilled?: (...args: any[]) => void, onRejected?: (...args: any[]) => void) {\n        this.promise = promise;\n        if (isFunction(onFulfilled)) {\n            this.callFulfilled = function(value: any) {\n                unwrap(this.promise, onFulfilled, value);\n            };\n        } else {\n            this.callFulfilled = function(value: any) {\n                doResolve(this.promise, value);\n            };\n        }\n        if (isFunction(onRejected)) {\n            this.callRejected = function(error: Error) {\n                unwrap(this.promise, onRejected, error);\n            };\n        } else {\n            this.callRejected = function(error: Error) {\n                doReject(this.promise, error);\n            };\n        }\n    }\n}\n","function makeCo(pro) {\n    return ((Promise) => {\n        const slice = Array.prototype.slice;\n        function co(gen) {\n            const ctx = this;\n            const args = slice.call(arguments, 1);\n            return new Promise(function _(resolve, reject) {\n                // 把传入的方法执行一下并存下返回值\n                if (typeof gen === \"function\") {\n                    gen = gen.apply(ctx, args);\n                }\n                // 1. 传入的是一个方法通过上面的执行获得的返回值，\n                // 如果不是一个有next方法的对象直接resolve出去\n                // 2. 传入的不是一个方法且不是一个next方法的对象直接resolve出去\n                if (!gen || typeof gen.next !== \"function\") {\n                    return resolve(gen);\n                }\n                // 执行\n                onFulfilled();\n                /**\n                 * @param {Mixed} res\n                 * @return {null}\n                 */\n                function onFulfilled(res?: any) {\n                    let ret;\n                    try {\n                        // 获取next方法获得的对象，并把上一次的数据传递过去\n                        ret = gen.next(res);\n                    } catch (e) {\n                        // generator 获取下一个yield值发生异常\n                        return reject(e);\n                    }\n                    // 处理yield的值\n                    next(ret);\n                    return null;\n                }\n                /**\n                 * @param {Error} err\n                 * @return {undefined}\n                 */\n                function onRejected(err) {\n                    let ret;\n                    try {\n                        // 把错误抛到generator里，并且接收下次的\n                        ret = gen.throw(err);\n                    } catch (e) {\n                        // generator 获取下一个yield值发生异常\n                        return reject(e);\n                    }\n                    // 处理yield的值\n                    next(ret);\n                }\n                function next(ret) {\n                    // generator执行完并把返回值resolve出去\n                    if (ret.done) {\n                        return resolve(ret.value);\n                    }\n                    const value = toPromise(ctx, ret.value);\n                    if (value && isPromise(value)) {\n                        return value.then(onFulfilled, onRejected);\n                    }\n                    return onRejected(new TypeError(\"You may only yield a function, promise,\"\n                        + \" generator, array, or object, \"\n                        + 'but the following object was passed: \"' + String(ret.value) + '\"'));\n                }\n            });\n        }\n        /**\n         * any to Promise\n         * @param ctx\n         * @param obj\n         */\n        function toPromise(ctx: any, obj: any) {\n            if (!obj) { return obj; }\n            if (isPromise(obj)) { return obj; }\n            // 判断是 Generator 对象|方法 直接通过 co 转换为Promise\n            if (isGeneratorFunction(obj) || isGenerator(obj)) {\n                return co.call(ctx, obj);\n            }\n            // 判断是个回调方法\n            if (\"function\" === typeof obj) {\n                return thunkToPromise(ctx, obj);\n            }\n            // 判断是个数组\n            if (Array.isArray(obj)) {\n                return arrayToPromise(ctx, obj);\n            }\n            if (isObject(obj)) {\n                return objectToPromise(ctx, obj);\n            }\n            return obj;\n        }\n\n        function thunkToPromise(ctx, fn) {\n            return new Promise(function _p(resolve, reject) {\n                fn.call(ctx, function _(err, res) {\n                    if (err) { return reject(err); }\n                    if (arguments.length > 2) {\n                        res = slice.call(arguments, 1);\n                    }\n                    resolve(res);\n                });\n            });\n        }\n\n        function arrayToPromise(ctx, obj: any[]) {\n            return Promise.all(obj.map((item) => toPromise(ctx, item)));\n        }\n\n        function objectToPromise(ctx, obj) {\n            const results = {};\n            const keys = Object.keys(obj);\n            const promises = [];\n            for (let i = 0, len = keys.length; i < len; i++) {\n                const key = keys[i];\n                const val = obj[key];\n                const promise = toPromise(ctx, val);\n                if (promise && isPromise(promise)) {\n                    promises.push(promise.then(function _(res) {\n                        results[key] = res;\n                    }));\n                } else {\n                    results[key] = val;\n                }\n            }\n            return Promise.all(promises).then(function _() {\n                return results;\n            });\n        }\n\n        /**\n         * is Promise\n         * @param {Promise} obj\n         * @return {Boolean}\n         */\n        function isPromise(obj: { then: (...args: any[]) => any }) {\n            return \"function\" === typeof obj.then;\n        }\n\n        /**\n         * is Generator\n         * @param {Generator} obj\n         * @return {Boolean}\n         */\n        function isGenerator(obj) {\n            return \"function\" === typeof obj.next &&\n                \"function\" === typeof obj.throw;\n        }\n\n        function isGeneratorFunction(obj) {\n            const constructor = obj.constructor;\n            if (!constructor) { return false; }\n            if (\"GeneratorFunction\" === constructor.name ||\n                \"GeneratorFunction\" === constructor.displayName) {\n                return true;\n            }\n            return isGenerator(constructor.prototype);\n        }\n\n        function isObject(val) {\n            return Object === val.constructor;\n        }\n        return co;\n    })(pro);\n}\nexport default makeCo;\n","import {\n    doReject,\n    doResolve,\n    getThen,\n    INTERNAL,\n    isArray,\n    isFunction,\n    isObject,\n    safelyResolveThen,\n    unwrap,\n} from \"./utils\";\n\nimport schedule from \"./schedule\";\n\nimport { QueueItem } from \"./queue\";\nimport { AppointState } from \"./type\";\n\nimport makeCo from \"./co\";\n\ndeclare const global: any;\n\n/**\n * @constructor\n */\nexport default class Appoint {\n    public static co = makeCo(Appoint);\n    public static resolve(value) {\n        if (value instanceof Appoint) {\n            return value;\n        }\n        return doResolve(new Appoint(INTERNAL), value);\n    }\n    public static reject(error) {\n        if (error instanceof Appoint) {\n            return error;\n        }\n        return doReject(new Appoint(INTERNAL), error);\n    }\n    public static all(iterable: Appoint[]) {\n        const self = this;\n        if (!isArray(iterable)) {\n            return this.reject(new TypeError(\"must be an array\"));\n        }\n        const len = iterable.length;\n        let called = false;\n        if (!len) {\n            return this.resolve([]);\n        }\n        const values = new Array(len);\n        let i: number = -1;\n        const promise = new Appoint(INTERNAL);\n        while (++i < len) {\n            allResolver(iterable[i], i);\n        }\n        return promise;\n        function allResolver(value: Appoint, index: number) {\n            self.resolve(value).then(resolveFromAll, (error: Error) => {\n                if (!called) {\n                    called = true;\n                    doReject(promise, error);\n                }\n            });\n            function resolveFromAll(outValue: any) {\n                values[index] = outValue;\n                if (index === len - 1 && !called) {\n                    called = true;\n                    doResolve(promise, values);\n                }\n            }\n        }\n    }\n    public static race(iterable) {\n        const self = this;\n        if (!isArray(iterable)) {\n            return this.reject(new TypeError(\"must be an array\"));\n        }\n        const len = iterable.length;\n        let called = false;\n        if (!len) {\n            return this.resolve([]);\n        }\n        const values = new Array(len);\n        let i: number = -1;\n        const promise = new self(INTERNAL);\n        while (++i < len) {\n            resolver(iterable[i]);\n        }\n        return promise;\n        function resolver(value: Appoint) {\n            self.resolve(value).then((response: any) => {\n                if (!called) {\n                    called = true;\n                    doResolve(promise, response);\n                }\n            }, (error: Error) => {\n                if (!called) {\n                    called = true;\n                    doReject(promise, error);\n                }\n            });\n        }\n    }\n    public static polyfill(): void {\n        (function _(glo) {\n            if (typeof glo.Promise !== \"function\") {\n                glo.Promise = Appoint;\n            }\n        })(typeof global === \"undefined\" ? window : global);\n    }\n    public handled: boolean;\n    public value: any;\n    public queue: QueueItem[];\n    private state: AppointState;\n    constructor(resolver: () => any) {\n        if (!isFunction(resolver)) {\n            throw new TypeError(\"resolver must be a function\");\n        }\n        this.state = AppointState.PENDING;\n        this.value = void 0;\n        this.queue = [];\n        this.handled = true;\n        if (resolver !== INTERNAL) {\n            safelyResolveThen(this, resolver);\n        }\n    }\n    public then(onFulfilled?: (...args: any[]) => void, onRejected?: (...args: any[]) => void) {\n        if (!isFunction(onFulfilled) && this.state === AppointState.FULFILLED ||\n         !isFunction(onRejected) && this.state === AppointState.REJECTED) {\n             return this;\n        }\n        const promise = new Appoint(INTERNAL);\n        if (this.handled) {\n            this.handled = null;\n        }\n        if (this.getState() !== AppointState.PENDING) {\n            const resolver = this.getState() === AppointState.FULFILLED ? onFulfilled : onRejected;\n            unwrap(promise, resolver, this.value);\n        } else {\n            this.queue.push(new QueueItem(promise, onFulfilled, onRejected));\n        }\n        return promise;\n    }\n    public catch(onRejected: (...args: any[]) => void) {\n        return this.then(null, onRejected);\n    }\n    public setState(state: AppointState) {\n        if (this.state === AppointState.PENDING && this.state !== state) {\n            this.state = state;\n        }\n    }\n    public getState(): AppointState {\n        return this.state;\n    }\n}\n"],"names":["schedule"],"mappings":"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"}